---
import Composite from "@/components/composite/index.astro"
import Generic from "@/components/cards/generic.astro" 
import { Swiper, SwiperWrapper, SwiperSlide, SwiperPagination } from "astro-swiper";
const { heading, subheading, cards} = Astro.props

---

<Composite heading={heading} subheading={subheading}>
    <Swiper   
        options={{
        autoplay: {
            delay: 3000
        },
        speed: 1000,  
        loop: true,
        spaceBetween: 16,
        pagination: {
            el: ".swiper-pagination", 
        },
        breakpoints: {
            0: {
                slidesPerView: 1
            },
            768: {
                slidesPerView: 2
            },
            1024: {
                slidesPerView: 3
            },
            1440: {
                slidesPerView: 4
            }
        }
    }}> 
        <SwiperWrapper class="flex grow "> 
        { cards.map(card => (
            <SwiperSlide class="h-auto!"> 
                <Generic {...card} />
            </SwiperSlide>
        ))} 
        </SwiperWrapper>

        <SwiperPagination />
    </Swiper>   
</Composite>
 
<script>
    import { inView, animate, stagger  } from "motion"

    inView(document.querySelector(".swiper-wrapper"), (target) => { 
        animate(
            target.querySelectorAll(".swiper-slide"),
            { opacity: [0, 1]},
            { duration: 1, delay: stagger(0.05),  easing: "ease-out"}
        );
    });
</script>